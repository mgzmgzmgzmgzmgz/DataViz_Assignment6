<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Matrix multiplication</title>
    <style>

    </style>

    <script src="https://d3js.org/d3.v5.js"></script>
</head>

<body>

    n: <input min=1 max=15 value=4 type="range" id="slidern">
    m: <input min=1 max=15 value=4 type="range" id="sliderm">
    p: <input min=1 max=15 value=4 type="range" id="sliderp">

    <br>
    <br>

    <script>

        var width = 800;
        var height = 700;

        svg = d3.select("body")
            .append("svg")
            .attr("width", width + 40)
            .attr("height", height + 40)
            .style("background", "lightyellow");

        d3.select("#slidern").on("input", calculate_matrix_location)
        d3.select("#sliderm").on("input", calculate_matrix_location)
        d3.select("#sliderp").on("input", calculate_matrix_location)

        calculate_matrix_location();


        // This is the function where you draw your matrices
        function calculate_matrix_location() {

            let n = d3.select("#slidern").property("value")
            let m = d3.select("#sliderm").property("value")
            let p = d3.select("#sliderp").property("value")

            console.log("n slider value: " + n + " m slider value: " + m + " p slider value: " + p);

            // populate cx and cy for your circles  ----> data
            // join the data with circles
            // invoke the generic case (update enter and exit selection)
            let id_list1 = [];
            let id_list2 = [];
            let id_list3 = [];
            
            
            let mydata1 =  [];
            let mydata2 =  [];
            let mydata3 =  [];
            count1 = 0;
            count2 = 0;
            count3 = 0;
            for (i = 0; i < n; i++)
            {
                for (j = 0; j < m; j++)
                {
                    let point = {};
                    point.cx = ((width/3) / n) * (i) + 20;
                    point.cy = ((height/3) / m) * (j) + 20;
                    index = i*n + j; 
                    mydata1[count1] = point;
                    count1++;
//                    console.log("index: " + index);
                }
            }
            
            for (i = 0; i < m; i++)
            {
                for (j = 0; j < p; j++)
                {
                    let point = {};
                    point.cx = ((((width/3))) / m) * (i) + 70 + (width/3);
                    point.cy = (((height/3)) / p) * (j) + 20;
                    index = i*m + j; 
                    mydata2[count2] = point;
                    count2++;
//                    console.log("index: " + index);
                }
            }
            for (i = 0; i < n; i++)
            {
                for (j = 0; j < p; j++)
                {
                    let point = {};
                    point.cx = ((((width/3))) / n) * (i) + 20;
                    point.cy = (((height/3)) / p) * (j) + 70 + (height/3);
                    index = i*n + j; 
                    mydata2[count2] = point;
                    count2++;
//                    console.log("index: " + index);
                }
            }
//            console.log("length of array: " + mydata1.length);

            circle1 = svg.selectAll(".circleA").data(mydata1);
            circle1.exit().remove();
            circle1.enter().append("circle").merge(circle1)
            .attr("cx", function(d, i){
                //console.log(d.cx + " " + i);
                return d.cx;
            })
            .attr("cy", function(d, i){
                //console.log(d.cy + " " + i);
                return d.cy;
            })
            .attr("r",4)
            .attr("fill", "black")
            .attr("id", function(d,i){
                id_list1[i] = "id_"+i
                return "id_"+i;
            })
            .classed("circleA", true);
            
            
            circle2 = svg.selectAll(".circleB").data(mydata2);
            circle2.exit().remove();
            circle2.enter().append("circle").merge(circle2)
            .attr("cx", function(d, i){
                //console.log(d.cx + " " + i);
                return d.cx;
            })
            .attr("cy", function(d, i){
                //console.log(d.cy + " " + i);
                return d.cy;
            })
            .attr("r",4)
            .attr("fill", "black")
            .attr("id", function(d,i){
                id_list2[i] = "id_"+i;
                return "id_"+i;
            })
            .classed("circleB", true);

            circle3 = svg.selectAll(".circleC").data(mydata3);
            circle3.exit().remove();
            circle3.enter().append("circle").merge(circle3)
            .attr("cx", function(d, i){
                //console.log(d.cx + " " + i);
                return d.cx;
            })
            .attr("cy", function(d, i){
                //console.log(d.cy + " " + i);
                return d.cy;
            })
            .attr("r",4)
            .attr("fill", "black")
            .attr("id", function(d,i){
                id_list3[i] = "id_"+i;
                return "id_"+i;
            })
            .classed("circleC", true);
            
        }


        function step() {
            fewcircle = svg.selectAll("#id_1, #id_2, #id_3").attr("fill", "red").attr("r", 8)
            .transition()
            .duration(2000)
            .attr("r", 4)
            .attr("fill", "black");
        }

        function play() {

            counter = 0;
            interval = d3.interval(function(){
                counter++;
                console.log("loop!!!!!" + counter);
                if (counter == 5)
                interval.stop();
            }, 500);
        }

        d3.select("body").append("br")
        d3.select("body").append("button").text("Step").on("click", step);
        d3.select("body").append("button").text("Play").on("click", play);

    </script>


</body>

</html>
